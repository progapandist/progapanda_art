<div
  data-controller="gallery"
  data-gallery-slug-value="<%= @work.slug %>"
  data-gallery-imgproxy-url-value="<%= @work.imgproxy_url %>"
  data-gallery-prev-slug-value="<%= @prev_slug %>"
  data-gallery-next-slug-value="<%= @next_slug %>"
  data-gallery-position-value="<%= @position %>"
  data-gallery-total-value="<%= @total %>"
  data-gallery-title-value="<%= @work.title %>"
  data-gallery-location-value="<%= @work.location %>"
  data-gallery-year-value="<%= @work.year %>"
  data-gallery-description-value="<%= @work.description %>"
  data-gallery-dimensions-value="<%= [@work.height, @work.width, @work.depth].compact.join(' x ') if @work.dimensions.present? %>"
  data-gallery-permalink-value="<%= work_path(@work.slug) %>"
  class="gallery-scene"
>
  <!-- Current artwork layer -->
  <div class="artwork-layer" data-gallery-target="currentLayer">
    <img class="artwork-bg" data-gallery-target="currentBg" />
    <img class="artwork-main" data-gallery-target="currentMain" />
  </div>

  <!-- Incoming artwork layer (for crossfade) -->
  <div class="artwork-layer" style="opacity: 0;" data-gallery-target="incomingLayer">
    <img class="artwork-bg" data-gallery-target="incomingBg" />
    <img class="artwork-main" data-gallery-target="incomingMain" />
  </div>

  <!-- Info card -->
  <div
    data-controller="draggable"
    data-gallery-target="infoCard"
    class="info-box draggable-box text-black font-mono text-left text-sm"
    style="position: absolute; height: auto; z-index: 50; opacity: 0;"
  >
    <div class="info-box-handle" data-draggable-target="handle" aria-hidden="true">
      <span></span>
    </div>

    <h1
      data-gallery-target="infoTitle"
      class="gallery-info-title text-2xl font-bold leading-7 text-black xs:truncate xs:text-3xl xs:tracking-tight"
    >
      <%= @work.title %>
    </h1>
    <p>
      <span data-gallery-target="infoLocation"><%= @work.location %></span>
      <br>
      <span data-gallery-target="infoYear"><%= @work.year %></span>
      <br>
      <a data-gallery-target="infoPermalink" class="underline underline-offset-2 hover:underline-offset-4" href="<%= work_path(@work.slug) %>">Permalink</a>
    </p>

    <p data-gallery-target="infoDescription" class="gallery-info-description mt-2 text-base leading-6 text-black <%= 'hidden' unless @work.description.present? %>">
      <%= @work.description %>
    </p>

    <div class="h-8"></div>

    <p data-gallery-target="infoDimensions" class="<%= 'hidden' unless @work.dimensions.present? %>">
      <% if @work.dimensions.present? %>
        <%= @work.height %> x <%= @work.width %> <%= @work.depth %> cm
      <% end %>
    </p>

    <p>Andy Barnow, Marina Naperstak</p>
  </div>

  <!-- Progress bar -->
  <div
    data-gallery-target="progressBar"
    class="progress-bar"
    style="width: <%= (@position.to_f / @total * 100) %>%;"
  ></div>

  <div class="gallery-controls">
    <button
      type="button"
      data-gallery-target="infoToggle"
      data-action="click->gallery#toggleInfoFromButton"
      class="gallery-action-btn"
      title="Show or hide info"
      aria-label="Show or hide info"
      aria-pressed="true"
    >
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
      </svg>
    </button>

    <a
      href="<%= grid_path(from: @work.slug) %>"
      data-gallery-target="gridLink"
      class="gallery-action-btn"
      title="All works"
      aria-label="All works"
    >
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <rect x="3" y="3" width="7" height="7"/>
        <rect x="14" y="3" width="7" height="7"/>
        <rect x="3" y="14" width="7" height="7"/>
        <rect x="14" y="14" width="7" height="7"/>
      </svg>
    </a>
  </div>
</div>
